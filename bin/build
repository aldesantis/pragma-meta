#!/usr/bin/env bash

set -e

# Pragma::Contract
echo "****************************"
echo "* Testing Pragma::Contract *"
echo "****************************"
cd contract
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec

# Pragma::Decorator
echo "*****************************"
echo "* Testing Pragma::Decorator *"
echo "*****************************"
cd ../decorator
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec

# Pragma::Operation
echo "*****************************"
echo "* Testing Pragma::Operation *"
echo "*****************************"
cd ../operation
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec

# Pragma::Policy
echo "**************************"
echo "* Testing Pragma::Policy *"
echo "**************************"
cd ../policy
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec

# Pragma::Macro
echo "*************************"
echo "* Testing Pragma::Macro *"
echo "*************************"
cd ../macro
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec

# Pragma::Filter
echo "**************************"
echo "* Testing Pragma::Filter *"
echo "**************************"
cd ../filter
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec

# Pragma
echo "******************"
echo "* Testing Pragma *"
echo "******************"
cd ../pragma
export BUNDLE_GEMFILE=$PWD/Gemfile
bundle check || bundle update --quiet
bundle exec rspec spec
